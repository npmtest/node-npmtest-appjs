{"/home/travis/build/npmtest/node-npmtest-appjs/test.js":"/* istanbul instrument in package npmtest_appjs */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        switch (local.modeJs) {\n        // re-init local from window.local\n        case 'browser':\n            local = local.global.utility2.objectSetDefault(\n                local.global.utility2_rollup || local.global.local,\n                local.global.utility2\n            );\n            break;\n        // re-init local from example.js\n        case 'node':\n            local = (local.global.utility2_rollup || require('utility2'))\n                .requireExampleJsFromReadme();\n            break;\n        }\n        // export local\n        local.global.local = local;\n    }());\n\n\n\n    // run shared js-env code - function\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - function\n    case 'browser':\n        break;\n\n\n\n    // run node js-env code - function\n    case 'node':\n        break;\n    }\n\n\n\n    // run shared js-env code - post-init\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - post-init\n    case 'browser':\n        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test browsers's null-case handling-behavior-behavior\n         */\n            onError(null, options);\n        };\n\n        // run tests\n        local.nop(local.modeTest &&\n            document.querySelector('#testRunButton1') &&\n            document.querySelector('#testRunButton1').click());\n        break;\n\n\n\n    // run node js-env code - post-init\n    /* istanbul ignore next */\n    case 'node':\n        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApidoc's default handling-behavior-behavior\n         */\n            options = { modulePathList: module.paths };\n            local.buildApidoc(options, onError);\n        };\n\n        local.testCase_buildApp_default = local.testCase_buildApp_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApp's default handling-behavior-behavior\n         */\n            local.testCase_buildReadme_default(options, local.onErrorThrow);\n            local.testCase_buildLib_default(options, local.onErrorThrow);\n            local.testCase_buildTest_default(options, local.onErrorThrow);\n            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);\n            options = [];\n            local.buildApp(options, onError);\n        };\n\n        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||\n            function (options, onError) {\n            /*\n             * this function will test buildCustomOrg's default handling-behavior\n             */\n                options = {};\n                local.buildCustomOrg(options, onError);\n            };\n\n        local.testCase_buildLib_default = local.testCase_buildLib_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildLib's default handling-behavior\n         */\n            options = {};\n            local.buildLib(options, onError);\n        };\n\n        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildReadme's default handling-behavior-behavior\n         */\n            options = {};\n            local.buildReadme(options, onError);\n        };\n\n        local.testCase_buildTest_default = local.testCase_buildTest_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildTest's default handling-behavior\n         */\n            options = {};\n            local.buildTest(options, onError);\n        };\n\n        local.testCase_webpage_default = local.testCase_webpage_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test webpage's default handling-behavior\n         */\n            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };\n            local.browserTest(options, onError);\n        };\n\n        // run test-server\n        local.testRunServer(local);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-appjs/lib.npmtest_appjs.js":"/* istanbul instrument in package npmtest_appjs */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || local;\n        // init lib\n        local.local = local.npmtest_appjs = local;\n        // init exports\n        if (local.modeJs === 'browser') {\n            local.global.utility2_npmtest_appjs = local;\n        } else {\n            module.exports = local;\n            module.exports.__dirname = __dirname;\n            module.exports.module = module;\n        }\n    }());\n}());\n","/home/travis/build/npmtest/node-npmtest-appjs/example.js":"/*\nexample.js\n\nquickstart example\n\ninstruction\n    1. save this script as example.js\n    2. run the shell command:\n        $ npm install npmtest-appjs && PORT=8081 node example.js\n    3. play with the browser-demo on http://127.0.0.1:8081\n*/\n\n\n\n/* istanbul instrument in package npmtest_appjs */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || (local.modeJs === 'browser'\n            ? local.global.utility2_npmtest_appjs\n            : global.utility2_moduleExports);\n        // export local\n        local.global.local = local;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // post-init\n    // run browser js-env code - post-init\n    /* istanbul ignore next */\n    case 'browser':\n        local.testRunBrowser = function (event) {\n            if (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('onreset'))) {\n                // reset output\n                Array.from(\n                    document.querySelectorAll('body > .resettable')\n                ).forEach(function (element) {\n                    switch (element.tagName) {\n                    case 'INPUT':\n                    case 'TEXTAREA':\n                        element.value = '';\n                        break;\n                    default:\n                        element.textContent = '';\n                    }\n                });\n            }\n            switch (event && event.currentTarget && event.currentTarget.id) {\n            case 'testRunButton1':\n                // show tests\n                if (document.querySelector('#testReportDiv1').style.display === 'none') {\n                    document.querySelector('#testReportDiv1').style.display = 'block';\n                    document.querySelector('#testRunButton1').textContent =\n                        'hide internal test';\n                    local.modeTest = true;\n                    local.testRunDefault(local);\n                // hide tests\n                } else {\n                    document.querySelector('#testReportDiv1').style.display = 'none';\n                    document.querySelector('#testRunButton1').textContent = 'run internal test';\n                }\n                break;\n            // custom-case\n            default:\n                break;\n            }\n            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('oneval')))) {\n                // try to eval input-code\n                try {\n                    /*jslint evil: true*/\n                    eval(document.querySelector('#inputTextareaEval1').value);\n                } catch (errorCaught) {\n                    console.error(errorCaught);\n                }\n            }\n        };\n        // log stderr and stdout to #outputTextareaStdout1\n        ['error', 'log'].forEach(function (key) {\n            console[key + '_original'] = console[key];\n            console[key] = function () {\n                var element;\n                console[key + '_original'].apply(console, arguments);\n                element = document.querySelector('#outputTextareaStdout1');\n                if (!element) {\n                    return;\n                }\n                // append text to #outputTextareaStdout1\n                element.value += Array.from(arguments).map(function (arg) {\n                    return typeof arg === 'string'\n                        ? arg\n                        : JSON.stringify(arg, null, 4);\n                }).join(' ') + '\\n';\n                // scroll textarea to bottom\n                element.scrollTop = element.scrollHeight;\n            };\n        });\n        // init event-handling\n        ['change', 'click', 'keyup'].forEach(function (event) {\n            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {\n                element.addEventListener(event, local.testRunBrowser);\n            });\n        });\n        // run tests\n        local.testRunBrowser();\n        break;\n\n\n\n    // run node js-env code - post-init\n    /* istanbul ignore next */\n    case 'node':\n        // export local\n        module.exports = local;\n        // require modules\n        local.fs = require('fs');\n        local.http = require('http');\n        local.url = require('url');\n        // init assets\n        local.assetsDict = local.assetsDict || {};\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.index.template.html'] = '\\\n<!doctype html>\\n\\\n<html lang=\"en\">\\n\\\n<head>\\n\\\n<meta charset=\"UTF-8\">\\n\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n    box-sizing: false,\\n\\\n    universal-selector: false\\n\\\n*/\\n\\\n* {\\n\\\n    box-sizing: border-box;\\n\\\n}\\n\\\nbody {\\n\\\n    background: #dde;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n    margin: 2rem;\\n\\\n}\\n\\\nbody > * {\\n\\\n    margin-bottom: 1rem;\\n\\\n}\\n\\\n.utility2FooterDiv {\\n\\\n    margin-top: 20px;\\n\\\n    text-align: center;\\n\\\n}\\n\\\n</style>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n*/\\n\\\ntextarea {\\n\\\n    font-family: monospace;\\n\\\n    height: 10rem;\\n\\\n    width: 100%;\\n\\\n}\\n\\\ntextarea[readonly] {\\n\\\n    background: #ddd;\\n\\\n}\\n\\\n</style>\\n\\\n</head>\\n\\\n<body>\\n\\\n<!-- utility2-comment\\n\\\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\\nutility2-comment -->\\n\\\n<h1>\\n\\\n<!-- utility2-comment\\n\\\n    <a\\n\\\n        {{#if env.npm_package_homepage}}\\n\\\n        href=\"{{env.npm_package_homepage}}\"\\n\\\n        {{/if env.npm_package_homepage}}\\n\\\n        target=\"_blank\"\\n\\\n    >\\n\\\nutility2-comment -->\\n\\\n        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\\n<!-- utility2-comment\\n\\\n    </a>\\n\\\nutility2-comment -->\\n\\\n</h1>\\n\\\n<h3>{{env.npm_package_description}}</h3>\\n\\\n<!-- utility2-comment\\n\\\n<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\\n<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\\n<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\\nutility2-comment -->\\n\\\n\\n\\\n\\n\\\n\\n\\\n<label>stderr and stdout</label>\\n\\\n<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\\n<!-- utility2-comment\\n\\\n{{#if isRollup}}\\n\\\n<script src=\"assets.app.js\"></script>\\n\\\n{{#unless isRollup}}\\n\\\nutility2-comment -->\\n\\\n<script src=\"assets.utility2.rollup.js\"></script>\\n\\\n<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\\n<script src=\"assets.npmtest_appjs.rollup.js\"></script>\\n\\\n<script src=\"assets.example.js\"></script>\\n\\\n<script src=\"assets.test.js\"></script>\\n\\\n<!-- utility2-comment\\n\\\n{{/if isRollup}}\\n\\\nutility2-comment -->\\n\\\n<div class=\"utility2FooterDiv\">\\n\\\n    [ this app was created with\\n\\\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\\n    ]\\n\\\n</div>\\n\\\n</body>\\n\\\n</html>\\n\\\n';\n        /* jslint-ignore-end */\n        if (local.templateRender) {\n            local.assetsDict['/'] = local.templateRender(\n                local.assetsDict['/assets.index.template.html'],\n                {\n                    env: local.objectSetDefault(local.env, {\n                        npm_package_description: 'the greatest app in the world!',\n                        npm_package_name: 'my-app',\n                        npm_package_nameAlias: 'my_app',\n                        npm_package_version: '0.0.1'\n                    })\n                }\n            );\n        } else {\n            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']\n                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {\n                    // jslint-hack\n                    String(match0);\n                    switch (match1) {\n                    case 'npm_package_description':\n                        return 'the greatest app in the world!';\n                    case 'npm_package_name':\n                        return 'my-app';\n                    case 'npm_package_nameAlias':\n                        return 'my_app';\n                    case 'npm_package_version':\n                        return '0.0.1';\n                    }\n                });\n        }\n        // run the cli\n        if (local.global.utility2_rollup || module !== require.main) {\n            break;\n        }\n        local.assetsDict['/assets.example.js'] =\n            local.assetsDict['/assets.example.js'] ||\n            local.fs.readFileSync(__filename, 'utf8');\n        // bug-workaround - long $npm_package_buildCustomOrg\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.npmtest_appjs.rollup.js'] =\n            local.assetsDict['/assets.npmtest_appjs.rollup.js'] ||\n            local.fs.readFileSync(\n                local.npmtest_appjs.__dirname + '/lib.npmtest_appjs.js',\n                'utf8'\n            ).replace((/^#!/), '//');\n        /* jslint-ignore-end */\n        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';\n        // if $npm_config_timeout_exit exists,\n        // then exit this process after $npm_config_timeout_exit ms\n        if (Number(process.env.npm_config_timeout_exit)) {\n            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n        }\n        // start server\n        if (local.global.utility2_serverHttp1) {\n            break;\n        }\n        process.env.PORT = process.env.PORT || '8081';\n        console.error('server starting on port ' + process.env.PORT);\n        local.http.createServer(function (request, response) {\n            request.urlParsed = local.url.parse(request.url);\n            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n                response.end(local.assetsDict[request.urlParsed.pathname]);\n                return;\n            }\n            response.statusCode = 404;\n            response.end();\n        }).listen(process.env.PORT);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/index.js":"if (typeof Proxy !== 'object' || typeof WeakMap !== 'function') {\n  throw new Error ('AppJS requires Node is run with the --harmony command line flag');\n}\n\nvar App = require('./App');\n\nmodule.exports = new App;\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/cli/postinstall.js":"var path         = require('path'),\n    //errorHandler = require('npm/lib/utils/error-handler'),\n    exec         = require('child_process').exec,\n    platform     = process.platform,\n    arch         = process.arch,\n    dependency   = 'appjs-' + platform;\n\nif (platform == \"linux\") {\n  dependency += '-' + arch;\n}\n\nconsole.log('Installing '+dependency+' package...');\n\nexec('npm install '+dependency,{cwd:path.resolve(__dirname,'../../../')},function(err,stdout,stderr){\n\n  if(err) {\n    console.log('Error installing '+dependency);\n    console.log('Please use `npm install '+dependency+' and install the package manually');\n  } else {\n    console.log(stderr);\n  }\n\n});\n/*npm.load({}, function(){\n  npm.commands.install([dependency], errorHandler);\n});*/\n\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/App.js":"var EventEmitter     = require('events').EventEmitter,\n    Router           = require('./router').Router,\n    Window           = require('./window'),\n    Menu             = require('./menu'),\n    _App             = require('./bindings').App,\n    NativeWindow     = require('./bindings').NativeWindow,\n    NativeMenu       = require('./bindings').NativeMenu,\n    NativeStatusIcon = require('./bindings').NativeStatusIcon,\n    WindowSettings   = require('./settings').WindowSettings,\n    AppSettings      = require('./settings').AppSettings;\n\nvar _init          = require('./bindings').init,\n    decorate       = require('./utils').decorate,\n    inherit        = require('./utils').inherit,\n    isObject       = require('./utils').isObject,\n    staticRouter   = require('./router').staticRouter,\n    pathResolve    = require('path').resolve;\n\nvar concat         = Array.prototype.concat;\n\nvar pipedEvents    = ['create', 'minimize', 'maximize', 'fullscreen', 'restore', 'move', 'resize'];\n\n\nmodule.exports = App;\n\nfunction App(){\n  var self = this;\n\n  process.on('appjs-exit', function(){\n    self.exit();\n  });\n\n  process.on('appjs-request', function(request, callback){\n    self.emit('request', request, callback);\n  });\n\n  this.windows = {};\n  this.router = new Router(this);\n}\n\ninherit(App, EventEmitter, [\n  function createMenu(options){\n    if (!this.settings) {\n      this.init();\n    }\n\n    var self = this,\n        menu = new Menu(options);\n\n    return menu;\n  },\n  function createStatusIcon(options){\n    if (!this.settings) {\n      this.init();\n    }\n\n    if(options.icon) {\n      options.icon = pathResolve(__dirname,'../../../..',options.icon);\n    }\n\n    var self = this,\n        nativeStatusIcon = new NativeStatusIcon(options);\n        inherit(nativeStatusIcon, EventEmitter, [\n          function toString(){\n            return '[object StatusIcon]';\n          }\n        ]);\n    return nativeStatusIcon;\n  },\n  function createWindow(url, options){\n    if (!this.settings) {\n      this.init();\n    }\n\n    options = new WindowSettings(url, options);\n\n    var self = this,\n        nativeWindow = new NativeWindow(options),\n        window = new Window(nativeWindow);\n\n    nativeWindow.name = options.name;\n    this.windows[options.name] = window;\n\n    nativeWindow.on('close', function(){\n      window.emit('close');\n      delete self.windows[options.name];\n    });\n\n    pipedEvents.forEach(function(event){\n      nativeWindow.pipe(event, window);\n    });\n\n    this.emit('create-window', window);\n\n    return window;\n  },\n  function exit(){\n    this.emit('exit');\n\n    Object.keys(this.windows).forEach(function(name){\n      var window = this.windows[name];\n      if (window && window.close) {\n        window.close();\n      }\n    }, this);\n\n    process.nextTick(function(){\n      process.kill(process.pid);\n    });\n  },\n  function serveFilesFrom(root){\n    this.router.use(staticRouter(root));\n    return this;\n  },\n  function init(settings){\n    if (!this.settings) {\n      decorate(this, true, {\n        settings: Object.freeze(new AppSettings(settings))\n      });\n      _init(this.settings);\n      this.emit('init', settings);\n    }\n    return this;\n  },\n  _App.screenHeight,\n  _App.screenWidth,\n]);\n\n\nNativeMenu.prototype.__proto__       = process.EventEmitter.prototype;\nNativeWindow.prototype.__proto__     = process.EventEmitter.prototype;\nNativeStatusIcon.prototype.__proto__ = process.EventEmitter.prototype;\n\ndecorate(NativeWindow.prototype, [\n  function pipe(event, target){\n    var emit = target.emit;\n    this.on(event, function(){\n      emit.apply(target, concat.apply(event, arguments));\n    });\n  }\n]);\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/router/index.js":"module.exports = {\n  Response: require('./Response'),\n  Request: require('./Request'),\n  Router: require('./Router'),\n  staticRouter: require('./static-router')\n};\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/router/Response.js":"var ServerResponse = require('http').ServerResponse,\n    STATUS_CODES   = require('http').STATUS_CODES,\n    fs             = require('fs'),\n    path           = require('path'),\n    url            = require('url'),\n    mime           = require('mime'),\n    inherit        = require('../utils').inherit,\n    decorate       = require('../utils').decorate;\n\nvar EMPTY = new Buffer(0);\n\nvar appjsVersion = 'AppJS' + require('../../package.json').version;\n\n\n\nmodule.exports = Response;\n\nfunction Response(request, callback){\n  this.callback = callback;\n  this.request = request;\n  this.headers = baseHeaders.child();\n}\n\ninherit(Response, ServerResponse, [\n\n  // we can set the status of the response\n  // Rename the 'status' property in order to use this function\n  function status(status){\n    this.statusCode = status;\n    return this;\n  },\n  function end(data){\n    // be sure all parameters will be passed to 'send' method\n    return this.send.apply(this, arguments);\n  },\n  function send(status, mimetype, data){\n    // rename the 'status' property in order to use 'status' function\n    if (arguments.length === 1) {\n      if (typeof status === 'number') {\n        this.statusCode = status;\n      } else {\n        this.mimetype = 'text/html';\n        this.data = status;\n      }\n    } else if (arguments.length === 2){\n      this.statusCode = status;\n      this.data = Buffer.isBuffer(mimetype) ? mimetype : new Buffer(mimetype);\n    } else {\n      this.statusCode = status;\n      this.mimetype = mimetype;\n      this.data = Buffer.isBuffer(data) ? data : new Buffer(data);\n    }\n\n    this.dispatch();\n  },\n  function dispatch(){\n    this.statusCode    || (this.statusCode = 200);\n    this.mimetype  || (this.mimetype = 'text/html');\n    this.data      || (this.data = EMPTY);\n    this.responseCode = STATUS_CODES[this.statusCode];\n\n    if (!Buffer.isBuffer(this.data)) {\n      if (this.data !== null && typeof this.data === 'object') {\n        this.mimetype = 'application/json';\n        this.data = new Buffer(JSON.stringify(this.data));\n      } else if (typeof this.data === 'string' || typeof this.data === 'number') {\n        this.data = new Buffer(this.data);\n      } else {\n        this.data = EMPTY;\n      }\n    }\n\n    this.headers.setHeader('Content-Length', this.data.length);\n    this.headers.setHeader('Content-Type', this.mimetype);\n    this.callback(this.statusCode, this.responseCode, this.mimetype, this.headers.toArrays(), this.data);\n  },\n  function redirect(destination){\n    this.statusCode = 302;\n    this.setHeader('Location', url.resolve(this.request.headers.Referer, destination));\n    this.dispatch();\n    return this;\n  },\n  function setHeader(name, header){\n    this.headers.setHeader(name, header);\n  },\n  function sendFile(status, filepath){\n    var self = this;\n    if (arguments.length === 2) {\n      this.path = path.resolve(filepath);\n      this.statusCode = status;\n    } else {\n      this.path = path.resolve(status);\n    }\n\n    fs.stat(this.path, function(err, stat){\n      if (err || !stat.isFile()) {\n        self.send(404);\n      } else {\n        self.mimetype = mime.lookup(self.path);\n        fs.readFile(self.path, function(err, buffer){\n          if (err) {\n            self.send(500);\n          } else {\n            self.data = buffer;\n            self.dispatch();\n          }\n        });\n      }\n    });\n  }\n]);\n\nfunction Headers(init){\n  if (init instanceof Headers) {\n    this.inheritHeaders(init);\n  } else {\n    this.names = Object.create(null);\n    this.headers = Object.create(null);\n    if (init) {\n      this.setHeaders(init);\n    }\n  }\n}\n\ndecorate(Headers.prototype, true, [\n  function setHeader(name, value){\n    var key = name.toLowerCase();\n    this.names[key] = name;\n    this.headers[key] = value;\n  },\n  function setHeaders(source){\n    if (source instanceof Headers) {\n      source.listHeaders().forEach(function(name){\n        var key = name.toLowerCase();\n        this.names[key] = name;\n        this.headers[key] = source.headers[key];\n      }, this);\n    } else {\n      for (var k in Object(source)) {\n        this.setHeader(k, source[k]);\n      }\n    }\n  },\n  function inheritHeaders(source){\n    if (source instanceof Headers) {\n      if (!this.names || !this.listHeaders().length) {\n        this.names = Object.create(source.names);\n        this.headers = Object.create(source.headers);\n      } else {\n        this.names.__proto__ = source.names;\n        this.headers.__proto__ = source.headers;\n      }\n    } else {\n      // throw?\n    }\n  },\n  function getHeader(name){\n    return this.headers[name.toLowerCase()];\n  },\n  function removeHeader(name){\n    var key = name.toLowerCase();\n    delete this.names[key];\n    delete this.headers[key];\n  },\n  function listHeaders(){\n    var i=0, k=[];\n    for (k[i++] in this.names);\n    return k;\n  },\n  function toArrays(){\n    var out = { names: [], headers: [] }\n    for (var k in this.names) {\n      out.names.push(this.names[k]);\n      out.headers.push(this.headers[k]);\n    }\n    return out;\n  },\n  function toObject(){\n    var out = {};\n    this.listHeaders().forEach(function(key){\n      out[this.names[key]] = this.headers[key];\n    }, this);\n    return out;\n  },\n  function child(){\n    return new Headers(this);\n  }\n]);\n\n\n\nvar baseHeaders = new Headers({\n  'Connection': 'Keep-Alive',\n  'Keep-Alive': 'timeout=3, max=100',\n  'Server': appjsVersion\n});\n\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/utils.js":"var fs   = require('fs'),\n    path = require('path');\n\nmodule.exports = {\n  decorate: decorate,\n  isObject: isObject,\n  inherit: inherit,\n  constants: constants,\n  log: log\n};\n\nvar isArray = Array.isArray,\n    defineProperty = Object.defineProperty,\n    getOwnDescriptor = Object.getOwnPropertyDescriptor,\n    getOwnNames = Object.getOwnPropertyNames,\n    getOwnKeys = Object.keys;\n\n\nfunction isObject(o){\n  return o != null && typeof o === 'object' || typeof o === 'function';\n}\n\nfunction Definable(desc){\n  for (var k in desc)\n    this[k] = desc[k];\n  this.value = null;\n}\n\nDefinable.prototype.define = function define(o, key, v){\n  this.value = v;\n  defineProperty(o, key, this);\n  this.value = null;\n};\n\n\nvar hiddenDesc = { enumerable: false },\n    normalVal = Definable.normal = new Definable({ enumerable: true, configurable: true, writable: true }),\n    hiddenVal = Definable.hidden = new Definable({ enumerable: false, configurable: true, writable: true }),\n    readonlyVal = Definable.readonly = new Definable({ enumerable: true, configurable: true, writable: false });\n\n\nfunction decorate(o){\n  var a, b, c, d,\n      hidden = arguments[1] === true,\n      overwrite = arguments[2] !== false;\n\n  for (a=0; a < arguments.length; a++) {\n    if (isArray(b = arguments[a])) {\n      for (c = 0; c < b.length; c++) {\n        if (typeof b[c] === 'function' && (d = b[c].name)) {\n          if (hidden || d === 'toString') {\n            hiddenVal.define(o, d, b[c]);\n          } else {\n            o[d] = b[c];\n          }\n        }\n      }\n    } else if (isObject(b)) {\n      for (c in b) {\n        try {\n          if (d = getOwnDescriptor(b, c)) {\n            if (d.get || d.set) {\n              defineProperty(o, c, d);\n            } else {\n              o[c] = d.value;\n              if (hidden || c === 'toString' || c === 'constructor') {\n                defineProperty(o, c, hiddenDesc);\n              }\n            }\n          }\n        } catch (e) {}\n      }\n    }\n  }\n  return o;\n}\n\nfunction constants(o, p){\n  Object.keys(p).forEach(function(key){\n    Object.defineProperty(o, key, {\n      enumerable: true,\n      value: p[key]\n    });\n  });\n}\n\n\nfunction inherit(Ctor, Super, props){\n  Ctor.prototype = Object.create(Super.prototype);\n  decorate(Ctor.prototype, true, props);\n  decorate(Ctor.prototype, true, {\n    constructor: Ctor\n  });\n  return Ctor;\n}\n\n\n\n\n\nvar logPath = path.resolve(module.parent && module.parent.parent && path.dirname(module.parent.parent.filename) || __dirname);\nif (fs.existsSync(logPath + '/appjs.log'))\n  logPath = path.resolve(logPath, 'appjs.log');\nelse if (fs.existsSync(logPath + '/content'))\n  logPath = path.resolve(logPath, 'content', 'appjs.log');\nelse\n  logPath = path.resolve(logPath, 'appjs.log');\n\n\nfunction isError(o){\n  if (!o || typeof o !== 'object') return false;\n  if (Error.prototype.isPrototypeOf(o)) return true;\n  if (/Error$/.test(o.name)) return true;\n  if ('stack' in o) return true;\n  return false;\n}\n\nfunction log(path, type, context, msg){\n  var err;\n  if (isError(type)) err = type, type = null;\n  else if (isError(context)) err = context, context = null;\n  else if (isError(msg)) err = msg, msg = null;\n  if (err) {\n    if (!msg) msg = err.stack || err.message;\n    if (!type) type = err.message || err.name;\n  }\n  var out = '';\n  if (type) out = type + ': ';\n  if (msg) out += msg;\n  if (context && typeof context === 'object') {\n    try { context = JSON.stringify(context) }\n    catch (e) { context += '' }\n    out += '[ ' + context + ' ]';\n  }\n  if (out) {\n    var file = path || logPath;\n    try { fs.writeFileSync(logPath, out) }\n    catch (e) { console.log(e, out) }\n  }\n}\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/router/Request.js":"var ClientRequest = require('http').ClientRequest,\n    url           = require('url'),\n    bodyParser    = require('./bodyParser'),\n    inherit       = require('../utils').inherit;\n\nmodule.exports = Request;\n\nfunction objectKeysToLower(obj){\n  for(prop in obj) {\n    if(!obj.hasOwnProperty(prop) || typeof obj[prop] == \"function\") continue;\n    obj[prop.toLowerCase()] = obj[prop];\n    delete obj[prop];\n  }\n  return obj;\n}\n\nfunction Request(request){\n  var decodedURL = decodeURIComponent(request.url);\n  var parsed = url.parse(decodedURL, true);\n  this.url = decodedURL;\n  this.headers = objectKeysToLower(request.headers);\n  this.method = request.method.toLowerCase();\n  this.pathname = parsed.pathname;\n  this.hash = parsed.hash;\n  this.params = parsed.query;\n  this.files = request.files;\n  this.body = request.body;\n  this.post = request.post;\n  bodyParser.parse(this);\n}\n\ninherit(Request, ClientRequest, [\n  function param(index){\n    return this.params[index];\n  },\n  function post(index){\n    return this.data[index];\n  },\n  function get(key){\n    return this.headers[key];\n  }\n]);\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/router/bodyParser.js":"/*!\n * Influenced by Connect - bodyParser\n * Copyright(c) 2010 Sencha Inc.\n * Copyright(c) 2011 TJ Holowaychuk\n * Copyright(c) 2012 AppJS\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nvar qs = require('querystring');\n\n/**\n * Extract the mime type from the given request's\n * _Content-Type_ header.\n *\n * @param  {IncomingMessage} req\n * @return {String}\n * @api private\n */\n\nfunction mime(req) {\n  var str = req.headers['Content-Type'] || '';\n  return str.split(';')[0];\n}\n\nexports.parse = function Parse(req) {\n  if (req.body) return;\n  req.body = {};\n\n  if ('get' == req.method || 'head' == req.method) return;\n  var parser = exports.parsers[mime(req)];\n  if (parser) {\n    parser(req);\n  }\n}\n\n/**\n * Parsers.\n */\n\nexports.parsers = {};\n\n/**\n * Parse application/x-www-form-urlencoded.\n */\n\nexports.parsers['application/x-www-form-urlencoded'] = function(req){\n  try {\n    req.post = req.body = req.post.length\n      ? qs.parse(req.post)\n      : {};\n  } catch (err){\n    // TODO ?\n    console.log(\"[AppJS] couldn't parse x-www-form-urlencoded\");\n  }\n};\n\n/**\n * Parse application/json.\n */\n\nexports.parse['application/json'] = function(req){\n  try {\n    req.post = req.body = req.post.length\n      ? JSON.parse(req.post)\n      : {};\n  } catch (err){\n    console.log(\"[AppJS] couldn't parse application/json\");\n  }\n};\n\n/**\n * Parse multipart/form-data.\n *\n * Note: Is it OK to use this function with the assumption\n * that CEF pre-parse files and extract them from post data?\n */\n\nexports.parse['multipart/form-data'] = function(req){\n  try {\n    req.post = req.body = req.post.length\n      ? qs.parse(req.post)\n      : {};\n  } catch (err){\n    // TODO ?\n    console.log(\"[AppJS] couldn't parse form-data\");\n  }\n};\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/router/Router.js":"var Response   = require('./Response'),\n    Request    = require('./Request'),\n    decorate   = require('../utils').decorate;\n\nvar methods = ['get', 'post'];\n\n\nmodule.exports = Router;\n\nfunction Router(emitter){\n  var self = this;\n\n  this.handlers = { all: [] };\n  for (var i=0; i < methods.length; i++) {\n    this.handlers[methods[i]] = [];\n  }\n\n  emitter.on('request',function(request, callback){\n    request = new Request(request);\n    response = new Response(request, callback);\n    self.handle(request, response);\n  });\n}\n\ndecorate(Router.prototype, [\n  function handle(request, response){\n    var listeners = this.handlers[request.method] || [],\n        index = -1;\n    void function next(){\n      if (++index === listeners.length) {\n        response.send(500, 'Internal Server Error');\n      } else {\n        listeners[index](request, response, next);\n      }\n    }();\n  },\n  function use(middleware){\n    for (var i=0; i < methods.length; i++) {\n      this.handlers[methods[i]].push(middleware);\n    }\n    return this;\n  },\n  function all(route, callback) {\n    for (var i=0; i < methods.length; i++) {\n      this[methods[i]](route, callback);\n    }\n    return this;\n  }\n]);\n\nmethods.forEach(function(method){\n  Router.prototype[method] = function(route, callback) {\n    this.handlers[method].push(function(request, response, next){\n      if (request.method.toLowerCase() === method && request.pathname === route) {\n        callback(request, response, next);\n      } else {\n        next();\n      }\n    });\n    return this;\n  }\n});\n\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/router/static-router.js":"var mime = require('mime'),\n    path = require('path'),\n    fs = require('fs');\n\nmodule.exports = staticRouter;\n\nfunction staticRouter(root){\n  root = path.join(root);\n\n  return function router(request, response, next){\n    if (request.method === 'get') {\n      var url = request.pathname === '/' ? '/index.html' : request.pathname;\n      var filePath = path.join(root, url);\n      fs.stat(filePath, function(err, stat){\n        if (err || !stat.isFile()) {\n          next()\n        } else {\n          response.headers.setHeader('Last-Modified', stat.mtime.toUTCString());\n          var mimetype = mime.lookup(filePath);\n          fs.readFile(filePath, function(err, buffer){\n            if (err) {\n              response.send(500);\n            } else {\n              response.send(200,mimetype,buffer);\n            }\n          });\n        }\n      });\n    } else {\n      next();\n    }\n  };\n}\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/window.js":"var fs   = require('fs'),\n    path = require('path');\n\nvar NativeWindow    = require('./bindings').NativeWindow,\n    App             = require('./bindings').App,\n    Ephemeral       = require('./handlers').Ephemeral,\n    ReferenceType   = require('./handlers').ReferenceType,\n    EventEmitter    = require('events').EventEmitter,\n    browserRequire  = require('./browser-require');\n\nvar decorate = require('./utils').decorate,\n    inherit  = require('./utils').inherit,\n    bridge   = require('./bridge'),\n    log      = require('./utils').log;\n\nvar _ = ReferenceType.unwrap;\n\nfunction toFinite(n){\n  return isFinite(n /= 1) ? n : 0;\n}\n\nfunction int(n, max){\n  if (n < 1 && n >= -1) {\n    n *= max;\n  }\n  return isFinite(n /= 1) ? n : 0;\n}\n\nfunction round(n, d){\n  return +n.toFixed(d || 2);\n}\n\nmodule.exports = Window;\n\nfunction Window(nativeWindow){\n  if (!(this instanceof Window))\n    return new Window(nativeWindow);\n\n  var events = this._events = {},\n      window = new Ephemeral(this, { window: nativeWindow }),\n      frame = this.frame = new Frame(nativeWindow);\n\n  Object.defineProperty(this, '_events', { enumerable: false });\n\n  nativeWindow.on('ready', function(){\n    nativeWindow.runInBrowser(bridge);\n    bridge(nativeWindow, window, Ephemeral.unwrap);\n\n    setTimeout(function(){\n      var windowProto = window.__proto__;\n      windowProto._events = events;\n      ['on', 'emit', 'once'].forEach(function(key){\n        windowProto[key] = EventEmitter.prototype[key];\n      });\n      windowProto.off = EventEmitter.prototype.removeListener;\n\n      window.frame = frame;\n      browserRequire(window);\n\n      window.emit('ready');\n      window.dispatchEvent(new window.Event('app-ready'));\n    }, 1);\n  });\n\n  nativeWindow.on('context-released', function(){\n    Ephemeral.unwrap(window).unmorph();\n  });\n\n  return window;\n}\n\ninherit(Window, EventEmitter, [\n  function toString(){\n    return '[object Window]';\n  }\n]);\n\n\nvar scr = Object.defineProperties({}, {\n  w: { get: App.screenWidth  },\n  h: { get: App.screenHeight },\n});\n\nvar props = ['title', 'topmost', 'showChrome', 'showOnTaskbar', 'showOnPager', 'resizable', 'autoResize', 'opacity', 'alpha', 'state'];\n\nvar WindowReference = new ReferenceType(props, {\n  get    left( ){ return this.left   },\n  get     top( ){ return this.top    },\n  get   width( ){ return this.width  },\n  get  height( ){ return this.height },\n  get   right( ){ return scr.w - this.left - this.width  },\n  get  bottom( ){ return scr.h - this.top  - this.height },\n  get centerX( ){ return this.left + this.width / 2  },\n  get centerY( ){ return this.top + this.height / 2 },\n  set    left(v){ v = int(v, scr.w); this.move(v, this.top, this.width + this.left - v, this.height); },\n  set     top(v){ v = int(v, scr.h); this.move(this.left, v, this.width, this.height + this.top - v); },\n  set   width(v){ this.width  = int(v, scr.w) },\n  set  height(v){ this.height = int(v, scr.h) },\n  set   right(v){ this.width  = scr.w - this.left - int(v, scr.w) },\n  set  bottom(v){ this.height = scr.h - this.top  - int(v, scr.h) },\n  set centerX(v){ this.left = int(v, scr.w) - this.width  / 2 },\n  set centerY(v){ this.top  = int(v, scr.h) - this.height / 2 },\n});\n\nfunction Frame(win){\n  if (!(win instanceof NativeWindow)) {\n    throw new TypeError('Invalid Constructor Invocation');\n  } else {\n    return new WindowReference(win);\n  }\n}\n\nWindowReference.prototype = Frame.prototype;\ndecorate(Frame.prototype, true, [\n  function center(){\n    _(this).move((scr.w - this.width) / 2, (scr.h - this.height) / 2);\n    return this;\n  },\n  function setMenuBar(options){ _(this).setMenuBar(options); return this; },\n  function openDialog(settings,cb){\n    // enum NW_DIALOGTYPE\n    var types = [\n      \"save\",\n      \"open\",\n      \"font\",\n      \"color\"\n    ];\n\n    settings.type = types.indexOf(settings.type);\n\n    settings.acceptTypes || (settings.acceptTypes = {});\n\n    if (Array.isArray(settings.acceptTypes)) {\n      var types = settings.acceptTypes;\n      settings.acceptTypes = {};\n      settings.acceptTypes[types.join('|')] = types;\n    }\n\n    settings.acceptTypes = Object.keys(settings.acceptTypes).reduce(function(acc, key) {\n      var val = settings.acceptTypes[key]\n      acc.push(key + ':' + val.join(';'));\n      return acc;\n    }, []).join(',');\n\n\n    _(this).openDialog(settings,cb);\n    return this;\n  },\n  function openDevTools(){ _(this).openDevTools(); return this; },\n  function closeDevTools(){ _(this).closeDevTools(); return this; },\n  function drag(){ _(this).drag(); return this; },\n  function minimize(){ _(this).minimize(); return this; },\n  function maximize(){ _(this).maximize(); return this; },\n  function restore(){ _(this).restore(); return this; },\n  function destroy(){ _(this).destroy(); return this; },\n  function fullscreen(){ _(this).fullscreen(); return this; },\n  function show(){ _(this).show(); return this; },\n  function focus(){ _(this).focus(); return this; },\n  function hide(){ _(this).hide(); return this; },\n  function resize(width, height){ _(this).resize(width, height); return this; },\n  function move(left, top, width, height){\n    _(this).move(left, top, width, height);\n    return this;\n  },\n  function setIcon(size, pathname){\n    pathname = path.resolve(pathname);\n    if (fs.existsSync(pathname)) {\n      _(this).setIcon(size, pathname);\n    }\n    return this;\n  },\n  function toString(){ return '[object Frame]'; },\n  function fade(to, duration, callback){\n    var self = this;\n    var from = this.opacity;\n    callback = arguments[arguments.length - 1];\n    duration = duration > 10 ? duration : to > 1 ? to : 300;\n    if (!(to >= 0 && to <= 1)) {\n      to = from > .5 ? 0 : 1;\n    }\n    if (from === to) return;\n\n    duration /= 15;\n    var step = (to - from) / duration;\n    var clamp = clamper(from > to, to);\n\n    void function fade(){\n      self.opacity = clamp(self.opacity + step);\n      if (self.opacity <= 0 || self.opacity >= 1) {\n        typeof callback == 'function' && callback.call(self, self.opacity);\n      } else {\n        setTimeout(fade, 15);\n      }\n    }();\n  }\n]);\n\nfunction clamper(isMin, val){\n  return isMin\n    ? function(n){ return n < val ? val : n }\n    : function(n){ return n > val ? val : n };\n}\n\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/bindings.js":"var path = require('path'),\n    fs = require('fs');\n\nvar platform = process.platform,\n    arch     = process.arch,\n    version  = parseFloat(process.version.slice(1));\n\nif (version < 0.8) {\n  throw new Error(\"AppJS requires Node.js v0.8\");\n}\n\nif (platform == 'darwin' && arch === 'x64') {\n  throw new Error(\"AppJS requires Node.js 32bit\");\n}\n\nvar bindingsPath = __dirname + '/../bindings/'+platform+'/'+arch+'/appjs.node';\n\nif (!fs.existsSync(bindingsPath)) {\n  throw new Error(\"AppJS .node file not found\");\n}\nbindingsPath = require.resolve(bindingsPath);\n\n\nvar platformPath = path.resolve(__dirname, '..', '..', 'appjs-' + platform + (platform === 'linux' ? '-' + arch : ''));\nvar libPath = path.resolve(platformPath, 'libs');\n\nif (!fs.existsSync(libPath)) {\n  throw new Error(\"CEF location not found\");\n}\n\nif (platform === 'win32') {\n  process.env.PATH += ';' + libPath;\n} else if (platform === 'linux') {\n  process.env.LD_LIBRARY_PATH += ':' + libPath;\n}\n\nmodule.exports = require(bindingsPath);\nmodule.exports.platformPath = platformPath;\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/bridge.js":"module.exports = function bridge(nativeWindow, win, unwrapEphemeral){\r\n  function isObject(o){\r\n    if (o == null) return o !== null && o !== undefined;\r\n    return typeof o === 'object' || typeof o === 'function';\r\n  }\r\n\r\n  function encode(msg){\r\n    if (msg == null)\r\n      return '{}';\r\n    else if (typeof msg === 'object')\r\n      return JSON.stringify(msg);\r\n    else if (typeof msg === 'string')\r\n      return msg;\r\n    else\r\n      throw new TypeError(\"Tried to encode invalid type\");\r\n  }\r\n\r\n  function decode(msg){\r\n    try {\r\n      return JSON.parse(msg);\r\n    } catch (e) {\r\n      return { error: e };\r\n    }\r\n  }\r\n\r\n\r\n  var _call   = Function.prototype.call,\r\n      _apply  = Function.prototype.apply,\r\n      _bind   = Function.prototype.bind,\r\n      _slice  = Array.prototype.slice,\r\n      _hasOwn = Object.prototype.hasOwnProperty,\r\n      char    = String.fromCharCode;\r\n\r\n  var foreignObjects = new WeakMap,\r\n      foreignIDs = new WeakMap,\r\n      localObjects = new WeakMap,\r\n      localIDs = new WeakMap,\r\n      localCanonicals = [],\r\n      foreignCanonicals = Object.create(null);\r\n\r\n  var TOKEN       = char(1),\r\n      LITERAL     = char(2),\r\n      TRUE        = [TOKEN, 1],\r\n      FALSE       = [TOKEN, 2],\r\n      UNDEFINED   = [TOKEN, 3],\r\n      NULL        = [TOKEN, 4],\r\n      NAN         = [TOKEN, 5],\r\n      INFINITY    = [TOKEN, 6],\r\n      NEGINFINITY = [TOKEN, 7],\r\n      NEGZERO     = [TOKEN, 8],\r\n      ZERO        = [TOKEN, 9];\r\n\r\n  var tokens = [, true, false, undefined, null, NaN, Infinity, -Infinity, -0, 0];\r\n\r\n  var pipe = function(source, listeners){\r\n    source.onmessage = function onmessage(msg){\r\n      var res = {};\r\n      msg = decode(msg);\r\n      listeners[msg.type] && listeners[msg.type](msg.msg, res);\r\n      return encode(res.result === undefined ? {} : res.result);\r\n    };\r\n\r\n    return {\r\n      send: function send(type, msg){\r\n        msg = { type: type, msg: msg };\r\n        return decode(source.send(encode(msg)));\r\n      },\r\n      listen: function listen(type, handler){\r\n        listeners[type] = handler;\r\n      }\r\n    };\r\n  }(nativeWindow || appjs, {});\r\n\r\n  if (!nativeWindow) {\r\n    var LOCAL = char(15), FOREIGN = char(16);\r\n    var logger = function logger(type, error){\r\n      if (typeof node !== 'undefined') {\r\n        logger = function logger(type, error){\r\n          node.process.emit('appjs-log', type, 'browser', error);\r\n        };\r\n        logger(type, context, error);\r\n      }\r\n    }\r\n  } else {\r\n    var LOCAL = char(16), FOREIGN = char(15);\r\n    var logger = function logger(type, error){\r\n      process.emit('appjs-log', type, 'node', error);\r\n    };\r\n    nativeWindow.once('context-released', function released(){\r\n      mirror = {\r\n        type      : function(){ return ['object'] },\r\n        keys      : function(){ return [] },\r\n        enumerate : function(){ return [] },\r\n        props     : function(){ return [] },\r\n        get       : function(){ return UNDEFINED },\r\n        set       : function(){ return TRUE },\r\n        proto     : function(){ return NULL },\r\n        has       : function(){ return FALSE },\r\n        hasOwn    : function(){ return FALSE },\r\n        delete    : function(){ return TRUE },\r\n        define    : function(){ return TRUE },\r\n        describe  : function(){ return UNDEFINED },\r\n        construct : function(){ return UNDEFINED },\r\n        apply     : function(){ return UNDEFINED }\r\n      };\r\n      unwrap = wrap = pipe.send = pipe.listen = function(){ return {} };\r\n      nativeWindow.onmessage = function(){ return ''; }\r\n      nativeWindow = null;\r\n      foreignObjects = foreignIDs = foreignCanonicals = null;\r\n      localObjects = localIDs = localCanonicals = null;\r\n    });\r\n  }\r\n\r\n\r\n\r\n  wrap(nativeWindow ? global : window);\r\n\r\n  function initForeign(obj, proxy){\r\n    foreignObjects.set(proxy, obj);\r\n    foreignIDs.set(obj, proxy);\r\n    foreignCanonicals[obj[1]] = obj;\r\n    return proxy;\r\n  }\r\n\r\n  function unwrap(obj){\r\n    if (!isObject(obj)) {\r\n      return obj;\r\n    } else if (obj[0] === TOKEN) {\r\n      return tokens[obj[1]];\r\n    } else if (obj[0] === LITERAL) {\r\n      return obj[1];\r\n    } else if (obj[0] === FOREIGN) {\r\n      if (obj[1] in foreignCanonicals) {\r\n        return foreignIDs.get(foreignCanonicals[obj[1]]);\r\n      } else {\r\n        return initForeign(obj, new Mirror(obj));\r\n      }\r\n    } else if (obj[0] === LOCAL && localCanonicals[obj[1]]) {\r\n      return localObjects.get(localCanonicals[obj[1]]);\r\n    } else {\r\n      return obj;\r\n    }\r\n  }\r\n\r\n  function wrap(obj){\r\n    if (!isObject(obj)) {\r\n      switch (typeof obj) {\r\n        case 'boolean':      return obj ? TRUE : FALSE;\r\n        case 'undefined':    return UNDEFINED;\r\n        case 'object':       return NULL;\r\n        case 'string':       return [LITERAL, obj];\r\n        case 'number':\r\n          switch (obj) {\r\n            case Infinity:   return INFINITY;\r\n            case -Infinity:  return NEGINFINITY;\r\n            case NaN:        return NAN;\r\n            case 0:          return 1 / obj === -Infinity ? NEGZERO : ZERO;\r\n            default:         return obj !== obj ? NAN : [LITERAL, obj];\r\n          }\r\n      }\r\n    } else if (foreignObjects.has(obj)) {\r\n      return foreignObjects.get(obj);\r\n    } else if (localIDs.has(obj)) {\r\n      return localIDs.get(obj);\r\n    } else {\r\n      var id = [LOCAL, localCanonicals.length];\r\n      localObjects.set(id, obj);\r\n      localIDs.set(obj, id);\r\n      localCanonicals[id[1]] = id;\r\n      return id;\r\n    }\r\n  }\r\n\r\n  var mirror = {\r\n    type: function type(obj){\r\n      return [typeof obj];\r\n    },\r\n    keys: function keys(obj){\r\n      return Object.keys(obj);\r\n    },\r\n    enumerate: function enumerate(obj){\r\n      var i=0, k=[];\r\n      for (k[i++] in obj);\r\n      return k;\r\n    },\r\n    props: function props(obj){\r\n      return Object.getOwnPropertyNames(obj);\r\n    },\r\n    get: function get(obj, key){\r\n      return wrap(obj[key]);\r\n    },\r\n    proto: function proto(obj){\r\n      return wrap(obj.__proto__);\r\n    },\r\n    has: function has(obj, key){\r\n      return wrap(key in obj);\r\n    },\r\n    hasOwn: function hasOwn(obj, key){\r\n      return wrap(_hasOwn.call(obj, key));\r\n    },\r\n    delete: function delete_(obj, key){\r\n      delete obj[key];\r\n      return TRUE;\r\n    },\r\n    define: function define(obj, key, desc){\r\n      if ('value' in desc) {\r\n        desc.value = unwrap(desc.value);\r\n      } else {\r\n        if (desc.get) desc.get = unwrap(desc.get);\r\n        if (desc.set) desc.set = unwrap(desc.set);\r\n      }\r\n      Object.defineProperty(obj, key, desc);\r\n      return TRUE;\r\n    },\r\n    describe: function describe(obj, key){\r\n      var desc = Object.getOwnPropertyDescriptor(obj, key);\r\n      if (desc) {\r\n        desc.configurable = true;\r\n        if ('value' in desc) {\r\n          if (desc.value === undefined) desc.value = obj[key];\r\n          desc.value = wrap(desc.value);\r\n        } else {\r\n          if (desc.get) desc.get = wrap(desc.get);\r\n          if (desc.set) desc.set = wrap(desc.set);\r\n        }\r\n        return desc;\r\n      } else if (desc === undefined && _hasOwn.call(obj, key)) {\r\n        return { configurable: true,\r\n                 enumerable: true,\r\n                 writable: true,\r\n                 value: wrap(obj[key]) };\r\n      } else {\r\n        return UNDEFINED;\r\n      }\r\n    },\r\n    construct: function construct(obj, args){\r\n      try {\r\n        return wrap(new (_bind.apply(obj, [null].concat(args.map(unwrap)))));\r\n      } catch (e) {\r\n        logger('Constructor throw', e);\r\n        return wrap(e);\r\n      }\r\n    },\r\n  };\r\n\r\n  if (nativeWindow) {\r\n    mirror.apply = function apply(obj, receiver, args){\r\n      try {\r\n        return wrap(_apply.call(obj, unwrap(receiver), args.map(unwrap)));\r\n      } catch (e) {\r\n        logger('Apply throw', e);\r\n        return wrap(e);\r\n      }\r\n    };\r\n    mirror.set = function set(obj, key, value){\r\n      obj[key] = unwrap(value);\r\n      return TRUE;\r\n    };\r\n  } else {\r\n    var proxyForProxy = function proxyForProxy(fn){\r\n      return function(){ return _apply.call(fn, this, arguments) };\r\n    };\r\n    mirror.apply = function apply(obj, receiver, args){\r\n      // workaround for bug where proxy functions are not valid DOM event handlers\r\n      args = args.map(unwrap);\r\n      if (obj.name === 'addEventListener' && typeof args[1] === 'function') {\r\n        args[1] = proxyForProxy(args[1]);\r\n      }\r\n      try {\r\n        return wrap(_apply.call(obj, unwrap(receiver), args));\r\n      } catch (e) {\r\n        logger('Apply throw', e);\r\n        return wrap(e);\r\n      }\r\n    };\r\n    mirror.set = function set(obj, key, value){\r\n      value = unwrap(value);\r\n      obj[key] = value;\r\n      if (obj[key] === null && typeof value === 'function') {\r\n        // workaround for bug where proxy functions are not valid DOM event handlers\r\n        obj[key] = proxyForProxy(value);\r\n      }\r\n      return TRUE;\r\n    };\r\n  }\r\n\r\n\r\n\r\n  function Mirror(obj){\r\n    var self = this;\r\n    var type = pipe.send('Δtype', obj)[0];\r\n    this.id = obj;\r\n    this.id2 = obj.concat(null);\r\n    this.id3 = obj.concat(null, null);\r\n    if (type === 'function') {\r\n      return Proxy.createFunction(this,\r\n        function(){ return self.apply(this, _slice.call(arguments)) },\r\n        function(){ return self.construct(_slice.call(arguments)) }\r\n      );\r\n    } else {\r\n      return Proxy.create(this, unwrap(pipe.send('Δproto', this.id)));\r\n    }\r\n  }\r\n\r\n\r\n  Mirror.prototype = {\r\n    keys: function keys(){\r\n      return pipe.send('Δkeys', this.id);\r\n    },\r\n    enumerate: function enumerate(){\r\n      return pipe.send('Δenumerate', this.id);\r\n    },\r\n    getOwnPropertyNames: function getOwnPropertyNames(){\r\n      return pipe.send('Δprops', this.id);\r\n    },\r\n    get: function get(rcvr, key){\r\n      this.id2[2] = key;\r\n      return unwrap(pipe.send('Δget', this.id2));\r\n    },\r\n    set: function set(rcvr, key, value){\r\n      this.id3[2] = key;\r\n      this.id3[3] = wrap(value);\r\n      pipe.send('Δset', this.id3);\r\n      return true;\r\n    },\r\n    getOwnPropertyDescriptor: function getOwnPropertyDescriptor(key){\r\n      this.id2[2] = key;\r\n      var desc = pipe.send('Δdescribe', this.id2);\r\n      if (desc) {\r\n        desc.configurable = true;\r\n        if ('value' in desc) {\r\n          desc.value = unwrap(desc.value);\r\n        } else {\r\n          if (desc.get) desc.get = unwrap(desc.get);\r\n          if (desc.set) desc.set = unwrap(desc.set);\r\n        }\r\n      }\r\n      return desc;\r\n    },\r\n    has: function has(key){\r\n      this.id2[2] = key;\r\n      return pipe.send('Δhas', this.id2);\r\n    },\r\n    hasOwn: function hasOwn(key){\r\n      this.id2[2] = key;\r\n      return pipe.send('ΔhasOwn', this.id2);\r\n    },\r\n    delete: function delete_(key){\r\n      this.id2[2] = key;\r\n      pipe.send('Δdelete', this.id2);\r\n      return true;\r\n    },\r\n    defineProperty: function defineProperty(key, desc){\r\n      this.id3[2] = key;\r\n      this.id3[3] = desc;\r\n      if ('value' in desc) {\r\n        desc.value = wrap(desc.value);\r\n      } else {\r\n        if (desc.get) desc.get = wrap(desc.get);\r\n        if (desc.set) desc.set = wrap(desc.set);\r\n      }\r\n      pipe.send('Δdefine', this.id3);\r\n      return true;\r\n    },\r\n    apply: function apply(receiver, args){\r\n      this.id3[2] = wrap(receiver);\r\n      this.id3[3] = args.map(wrap);\r\n      return unwrap(pipe.send('Δapply', this.id3));\r\n    },\r\n    construct: function construct(args){\r\n      this.id2[2] = args.map(wrap);\r\n      return unwrap(pipe.send('Δconstruct', this.id2));\r\n    }\r\n  };\r\n\r\n\r\n  Object.keys(mirror).forEach(function(key){\r\n    pipe.listen('Δ'+key, function(val, res){\r\n      res.result = mirror[key](unwrap(val), val[2], val[3]);\r\n    });\r\n  });\r\n\r\n  if (nativeWindow) {\r\n    void function(){\r\n      var id = [FOREIGN, 0];\r\n      unwrapEphemeral(win).morph(Mirror.prototype, {\r\n        id:  id,\r\n        id2: [FOREIGN, 0, null],\r\n        id3: [FOREIGN, 0, null, null]\r\n      });\r\n      initForeign(id, win);\r\n    }();\r\n  } else {\r\n    window.node = unwrap([FOREIGN, 0]);\r\n  }\r\n}\r\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/browser-require.js":"module.exports = browserRequire;\nvar parent = module.parent.parent.parent.parent;\n\nfunction browserRequire(window){\n\n  function require(request){\n    return parent.require(request);\n  }\n\n  window.Function('return '+function(_require, process, Buffer, global){\n    var Module = _require('module'),\n        path   = _require('path');\n\n    var browser = { compile: compileInBrowser,\n                    cache: {} };\n\n    var node    = { compile: Module.prototype._compile,\n                    cache: Module._cache };\n\n    var executingInBrowser = false;\n\n    Module.prototype._compile = function(content, filename){\n      var moduleSystem = executingInBrowser ? browser : node;\n      Module._cache = moduleSystem.cache;\n      var ret = moduleSystem.compile.call(this, content, filename);\n      Module._cache = moduleSystem.cache;\n      return ret;\n    };\n\n    window.require = function require(request, runInNode){\n      executingInBrowser = !runInNode;\n      var result = _require(request);\n      executingInBrowser = false;\n      return result;\n    };\n\n    function compileInBrowser(content, filename) {\n      var self = this;\n\n      function require(request, runInNode){\n        executingInBrowser = !runInNode;\n        request = self.require(request);\n        executingInBrowser = false;\n        return request;\n      }\n\n      function resolve(request){\n        return Module._resolveFilename(request, self);\n      }\n\n      require.extensions = Module._extensions;\n      require.cache      = Module._cache;\n      require.resolve    = resolve;\n      require.main       = document.mainModule;\n\n      content = content.replace(/^\\#\\!.*/, '');\n\n      var\n       dirname = path.dirname(filename),\n       module  = this,\n       exports = this.exports;\n\n       args  = ['exports','require','module','__filename','__dirname','Buffer','process','global',content],\n       argvs = [ exports,  require,  module,    filename,    dirname,  Buffer,  process,  global];\n\n      try {\n        return Function.apply(null, args).apply(exports, argvs);\n      } catch (e) {\n        return e;\n      }\n    }\n  })().call(window, require, process, Buffer, window);\n}\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/handlers.js":"var decorate = require('./utils').decorate;\n\nvar _hasOwn = Object.prototype.hasOwnProperty,\n    _apply = Function.prototype.apply,\n    _bind = Function.prototype.bind;\n\nmodule.exports = {\n  Ephemeral: Ephemeral,\n  MirrorHandler: MirrorHandler,\n  ReferenceType: ReferenceType\n};\n\n\nvar ephemerals = new WeakMap;\n\nfunction Ephemeral(target, data){\n  this.handler = new MirrorHandler(target);\n  Object.keys(Object(data)).forEach(function(key){\n    this[key] = data[key];\n  }, this);\n  var proxy = Proxy.create(this.handler, target.__proto__);\n  ephemerals.set(proxy, this);\n  return proxy;\n}\n\nEphemeral.unwrap = function unwrap(target){\n  return ephemerals.get(target);\n};\n\ndecorate(Ephemeral.prototype, [\n  function retarget(target){\n    this.handler.target = target;\n  },\n  function morph(handler, data){\n    this.handler.__proto__ = handler;\n    Object.keys(Object(data)).forEach(function(key){\n      this[key] = data[key];\n    }, this.handler);\n  },\n  function unmorph(){\n    this.handler.__proto__ = MirrorHandler.prototype;\n  }\n]);\n\n\n\nfunction MirrorHandler(target){\n  this.target = target;\n}\n\ndecorate(MirrorHandler.prototype, [\n  function keys(){\n    return Object.keys(this.target);\n  },\n  function enumerate(){\n    var i=0, k=[];\n    for (k[i++] in this.target);\n    return k;\n  },\n  function getOwnPropertyNames(){\n    return Object.getOwnPropertyNames(this.target);\n  },\n  function get(rcvr, key){\n    return this.target[key];\n  },\n  function set(rcvr, key, value){\n    this.target[key] = value;\n    return true;\n  },\n  function has(key){\n    return key in this.target;\n  },\n  function hasOwn(key){\n    return _hasOwn.call(this.target, key);\n  },\n  function delet\\u0065(key){\n    delete this.target[key];\n    return true;\n  },\n  function defineProperty(key, desc){\n    Object.defineProperty(this.target, key, desc);\n    return true;\n  },\n  function getOwnPropertyDescriptor(key){\n    var desc = Object.getOwnPropertyDescriptor(this.target, key);\n    desc && (desc.configurable = true);\n    return desc;\n  },\n  function apply(rcvr, args){\n    return _apply.call(this.target, rcvr, args);\n  },\n  function construct(args){\n    return new (_bind.apply(this.target, [null].concat(args)));\n  }\n]);\n\n\n\nvar references = new WeakMap;\n\nfunction ReferenceType(keys, accessors){\n  this.accessors = Object.create(null);\n  this.refKeys = Object.create(null);\n\n  if (Array.isArray(keys)) {\n    this.names = keys;\n    keys.forEach(function(key){ this[key] = key }, this.refKeys);\n  } else {\n    this.names = Object.keys(keys);\n    this.names.forEach(function(key){ this[key] = keys[key] }, this.refKeys);\n  }\n\n  if (accessors) {\n    var accessorKeys = Object.keys(accessors);\n    this.names = this.names.concat(accessorKeys);\n    accessorKeys.forEach(function(key){\n      this[key] = Object.getOwnPropertyDescriptor(accessors, key);\n    }, this.accessors);\n  }\n\n  function ReferenceHandler(reference, target){\n    this.reference = reference;\n    this.target = target;\n  }\n\n  ReferenceHandler.prototype = this;\n\n  return function Reference(reference){\n    var proxy = Proxy.create(new ReferenceHandler(reference, this), Reference.prototype);\n    references.set(proxy, reference);\n    return proxy;\n  };\n}\n\nReferenceType.unwrap = function unwrap(target){\n  return references.get(target);\n};\n\n\ndecorate(ReferenceType.prototype, [\n  function keys(){\n    return this.names.concat(Object.keys(this.target));\n  },\n  function enumerate(){\n    var i = this.names.length, k = this.names.slice();\n    for (k[i++] in this.target);\n    return k;\n  },\n  function getOwnPropertyNames(){\n    return this.names.concat(Object.getOwnPropertyNames(this.target));\n  },\n   function get(rcvr, key){\n    if (key === '__proto__') {\n      return this.target.__proto__;\n    } else if (key in this.refKeys) {\n      return this.reference[this.refKeys[key]];\n    } else if (key in this.accessors) {\n      return this.accessors[key].get.call(this.reference);\n    } else {\n      return this.target[key];\n    }\n  },\n  function set(rcvr, key, value){\n    if (key in this.refKeys) {\n      this.reference[this.refKeys[key]] = value;\n    } else if (key in this.accessors) {\n      this.accessors[key].set.call(this.reference, value);\n    } else {\n      this.target[key] = value;\n    }\n    return true;\n  },\n  function has(key){\n    return key in this.refKeys || key in this.accessors || key in this.target;\n  },\n  function hasOwn(key){\n    return key in this.refKeys || key in this.accessors || _hasOwn.call(this.target, key);\n  },\n  function delet\\u0065(key){\n    if (key in this.refKeys) {\n      delete this.reference[this.refKeys[key]];\n    } else {\n      delete this.target[key];\n    }\n    return true;\n  },\n  function defineProperty(key, desc){\n    if (key in this.refKeys) {\n      Object.defineProperty(this.reference, this.refKeys[key], desc);\n    } else if (key in this.accessors) {\n      this.accessors[key].set.call(this.reference, desc.value);\n    } else {\n      Object.defineProperty(this.target, key, desc);\n    }\n    return true;\n  },\n  function getOwnPropertyDescriptor(key){\n    if (key in this.refKeys) {\n      var desc = Object.getOwnPropertyDescriptor(this.reference, this.refKeys[key]);\n    } else if (key in this.accessors) {\n      return {\n        enumerable: true, configurable: true, writable: true,\n        value: this.accessors[key].get.call(this.reference)\n      };\n    } else {\n      var desc = Object.getOwnPropertyDescriptor(this.target, key);\n    }\n    desc && (desc.configurable = true);\n    return desc;\n  },\n  function apply(rcvr, args){\n    return _apply.call(this.reference, rcvr, args);\n  },\n  function construct(args){\n    return new (_bind.apply(this.reference, [null].concat(args)));\n  }\n]);\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/menu.js":"var fs   = require('fs'),\n    path = require('path');\n\nvar NativeMenu    = require('./bindings').NativeMenu,\n    EventEmitter  = require('events').EventEmitter,\n    inherit  = require('./utils').inherit;\n\nmodule.exports = Menu;\n\nfunction Menu(options){\n\n  normalizeItems(options);\n\n  var nativeMenu = new NativeMenu(options);\n\n  inherit(nativeMenu, EventEmitter, [\n    function toString(){\n      return '[object Menu]';\n    }\n  ]);\n\n  return nativeMenu;\n}\n\nvar normalizeItems = function(options){\n  normalizeMnemonic(options);\n  normalize(options);\n}\n\nvar normalizeMnemonic = function(options){\n\n  // OSX does not support mnemonics for menu,\n  // it only supports submenu mnemonics \n  if( process.platform == 'darwin') {\n    for(i in options) {\n      options[i]['label'] = options[i]['label'].replace(/(&)(\\w)/g,'$2');\n    }\n  }\n\n  if( process.platform != 'linux') {\n    return;\n  }\n\n  for(i in options) {\n    options[i]['label'] = options[i]['label'].replace(/(&)(\\w)/g,'_$2');\n    normalizeMnemonic(options[i]['submenu']);\n  }\n}\n\nvar normalize = function(options){\n  for(i in options) {\n    if(options[i].hasOwnProperty('icon')){\n      options[i]['icon'] = path.resolve(__dirname,'../../../..',options[i]['icon']);\n    }\n    normalize(options[i]['submenu']);\n  }\n}\n","/home/travis/build/npmtest/node-npmtest-appjs/node_modules/appjs/lib/settings.js":"var fs           = require('fs'),\n    path         = require('path'),\n    decorate     = require('./utils').decorate,\n    constants    = require('./utils').constants,\n    isObject     = require('./utils').isObject,\n    platformPath = require('./bindings').platformPath;\n\n\nmodule.exports = {\n  AppSettings: AppSettings,\n  WindowSettings: WindowSettings,\n  IconGroup: IconGroup\n};\n\nfunction AppSettings(o){\n  for (var k in Object(o)) {\n    this[k] = o[k];\n  }\n}\n\nAppSettings.create = function createAppSettings(o){\n  return new AppSettings(o);\n};\n\nconstants(AppSettings, {\n  LOGLEVEL_VERBOSE     : -1,\n  LOGLEVEL_INFO        :  0,\n  LOGLEVEL_WARNING     :  1,\n  LOGLEVEL_ERROR       :  2,\n  LOGLEVEL_ERROR_REPORT:  3,\n  LOGLEVEL_DISABLED    : 99\n});\n\n\ndecorate(AppSettings.prototype, {\n  JSFlags                : ' --harmony_proxies --harmony_collections --harmony_scoping',\n  LogLevel               : AppSettings.LOGLEVEL_DISABLED,\n  PakLoading             : true,\n\n  LocalesPakPath         : path.resolve(platformPath, 'data', 'locales'),\n  ChromePakPath          : path.resolve(platformPath, 'data', 'chrome.pak'),\n  LogFilePath            : '',\n  CachePath              : '',\n  UserStylesheetPath     : '',\n\n  UserAgent              : '',\n  ProductVersion         : '',\n  Locale                 : '',\n\n  StandardFont           : 'Times New Roman',\n  FixedFont              : 'Courier New',\n  SerifFont              : 'Times New Roman',\n  SansSerifFont          : 'Arial',\n  CursiveFont            : 'Script',\n  FantasyFont            : 'Impact',\n  DefaultEncoding        : 'ISO-8859-1',\n\n  DefaultFontSize        : 16,\n  FixedFontSize          : 13,\n  MinFontSize            : 0,\n  MinLogicalFontSize     : 6,\n\n  SiteSpecificQuirks     : false,\n  CaretBrowsing          : false,\n  UserStylesheets        : false,\n  AcceleratedCompositing : false,\n\n  XSSAuditer             : true,\n  HyperlinkAuditing      : true,\n  Plugins                : true,\n  Java                   : true,\n  PageCache              : true,\n  ImageLoading           : true,\n  EncodingDetector       : true,\n  RemoteFonts            : true,\n  DevTools               : true,\n  TabToLinks             : true,\n  ResizingTextareas      : true,\n  FitStandaloneImages    : true,\n\n  Accelerated2dCanvas    : true,\n  AcceleratedFilters     : true,\n  AcceleratedLayers      : true,\n  AcceleratedPainting    : true,\n  AcceleratedPlugins     : true,\n  AcceleratedVideo       : true,\n\n  JSCanRun               : true,\n  JSCanAccessClipboard   : true,\n  JSCanCloseWindows      : true,\n  JSCanOpenWindows       : true,\n\n  FileAccessFromFileURLs : true,\n  UniversalFileURLAccess : true,\n  UserStyles             : true,\n  HistoryAPI             : true,\n  AppCacheAPI            : true,\n  DatabaseAPI            : true,\n  DOMPasteAPI            : true,\n  DragAndDropAPI         : true,\n  LoadDrops              : true,\n  FullscreenAPI          : true,\n  LocalStorageAPI        : true,\n  WebGLAPI               : true,\n});\n\n\n\nfunction WindowSettings(o){\n  if (typeof o === 'string') {\n    if (isObject(arguments[1])) {\n      arguments[1].url = o;\n      o = arguments[1];\n    } else {\n      o = { url: o };\n    }\n  }\n  for (var k in Object(o)) {\n    this[k] = o[k];\n  }\n  this.icons = new IconGroup(this.icons);\n  if (!this.name || typeof this.name !== 'string') {\n    this.name = WindowSettings.createName();\n  }\n}\n\nWindowSettings.create = function createWindowSettings(o){\n  return new WindowSettings(o);\n};\n\nWindowSettings.createName = function(){\n  var names = [\n    'alpha', 'bravo', 'charlie', 'delta', 'echo', 'foxtrot', 'golf',\n    'hotel', 'india', 'juliet', 'kilo', 'lima', 'mike', 'november',\n    'oscar', 'papa', 'quebec', 'romeo', 'sierra', 'tango', 'uniform',\n    'victor', 'whiskey', 'x-ray', 'yankee', 'zulu'\n  ];\n  var index = 0, suffix = '';\n\n  return function createName(){\n    var name = names[index++] + suffix;\n    if (index === names.length) {\n      index = 0;\n      suffix = (suffix || 0) + 1;\n    }\n    return name;\n  };\n}();\n\ndecorate(WindowSettings.prototype, {\n  url           :'http://appjs/',\n  name          : null,\n  icons         : null,\n  width         : 800,\n  height        : 600,\n  left          : -1,\n  top           : -1,\n  opacity       : 1,\n  alpha         : false,\n  showChrome    : true,\n  autoResize    : false,\n  resizable     : true,\n  showResizeGrip: false,\n  fullscreen    : false,\n  topmost       : false,\n});\n\nvar namedSizes = ['smaller', 'small', 'big', 'bigger'],\n    numberSizes = [16, 32, 64, 128];\n\nvar sizeMap = {\n  16: 'smaller',\n  32: 'small',\n  64: 'big',\n  128: 'bigger',\n  smaller: 'smaller',\n  small: 'small',\n  big: 'big',\n  bigger: 'bigger'\n};\n\n\nfunction IconGroup(o){\n  if (o instanceof IconGroup) {\n    Object.keys(o).forEach(function(key){\n      this[key] = o[key];\n    }, this);\n  } else if (typeof o === 'string') {\n    this.setRoot(o);\n  } else if (isObject(o)) {\n    this.setObject(o);\n  } else if (Array.isArray(o)) {\n    this.setArray(o);\n  } else {\n    namedSizes.forEach(function(key){\n      this[key] = '';\n    }, this);\n  }\n}\n\nIconGroup.create = function createIconGroup(o){\n  return new IconGroup(o);\n};\n\n\ndecorate(IconGroup.prototype, [\n  function setRoot(root){\n    if (fs.existsSync(root + '/small.png')) {\n      var sizes = namedSizes;\n    } else if (fs.existsSync(root + '/16.png')) {\n      var sizes = numberSizes;\n    } else {\n      return this;\n    }\n    sizes.forEach(function(size){\n      this[sizeMap[size]] = path.resolve(root, size+'.png');\n    }, this);\n    this.resolve();\n    return this;\n  },\n  function setObject(obj){\n    for (var k in obj) {\n      if (sizeMap.hasOwnProperty(k)) {\n        this[sizeMap[k]] = obj[k];\n      }\n    }\n    this.resolve();\n    return this;\n  },\n  function setArray(array){\n    array.forEach(function(item){\n      if (typeof item === 'string' && /\\.png$/.test(item)) {\n        var name = path.basename(item).slice(0, -4);\n        if (sizeMap.hasOwnProperty(name)) {\n          this[sizeMap[name]] = item;\n        }\n      }\n    }, this);\n    this.resolve();\n    return this;\n  },\n  function resolve(){\n    Object.keys(this).forEach(function(key){\n      this[key] = path.resolve(this[key]);\n      if (!fs.existsSync(this[key])) {\n        delete this[key];\n      }\n    }, this);\n    return this;\n  }\n]);\n"}